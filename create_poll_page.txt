public function create_poll_page() {
        ob_start(); // Start output buffering
        $polls = get_option('mpp_polls', array());
    
        if (!is_array($polls)) {
            $polls = array();
        }
    
        if ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['new_poll'])) {
            $question = sanitize_text_field($_POST['question']);
            $options = array_map('sanitize_text_field', $_POST['options']);
    
            $polls[] = array(
                'question' => $question,
                'options' => $options,
                'votes' => array_fill(0, count($options), 0)
            );
    
            update_option('mpp_polls', $polls);
        }
    
        ?>
        <div class="wrap">
            <h1>Create a Poll</h1>
            <form method="post" action="">
                <table class="form-table">
                    <tr valign="top">
                        <td>
                            <span>Add Poll+</span>
                            <br>
                            <input type="text" class="question_input" name="question" value="" placeholder="Poll Title" />
                            <div class="btn_box_flex">
                                <input type="color" id="bgcolor" name="bgcolor" value="#ffffff">
                                <button type="button" id="add-option" class="button">Add Option +</button>
                            </div>
                        </td>
                    </tr>
                    <tr valign="top">
                        <td id="poll-options">
                            <div class="option-group">
                                <input type="text" name="options[]" placeholder="Poll Option 1" />
                                <button type="button" class="remove-option button">X</button>
                                <br>
                            </div>
                            <div class="option-group">
                                <input type="text" name="options[]" placeholder="Poll Option 2" />
                                <button type="button" class="remove-option button">X</button>
                                <br>
                            </div>
                            <div class="option-group">
                                <input type="text" name="options[]" placeholder="Poll Option 3" />
                                <button type="button" class="remove-option button">X</button>
                                <br>
                            </div>
                        </td>
                    </tr>
                </table>
                
                <div class="btn_flex">
                    <?php submit_button('Save Changes', 'primary', 'new_poll'); ?>
                    <?php submit_button('Draft', 'secondary', 'draft_poll'); ?>
                </div>
            </form>
        </div>
    
        <script>
            document.getElementById('add-option').addEventListener('click', function() {
                const container = document.getElementById('poll-options');
                const div = document.createElement('div');
                div.className = 'option-group';
                
                const input = document.createElement('input');
                input.type = 'text';
                input.name = 'options[]';
                input.placeholder = 'Poll Option ' + (container.getElementsByTagName('input').length + 1);
                
                const removeButton = document.createElement('button');
                removeButton.type = 'button';
                removeButton.className = 'remove-option button';
                removeButton.textContent = 'X';
                
                removeButton.addEventListener('click', function() {
                    div.remove();
                });
                
                div.appendChild(input);
                div.appendChild(removeButton);
                div.appendChild(document.createElement('br'));
                
                container.appendChild(div);
            });
    
            document.querySelectorAll('.remove-option').forEach(button => {
                button.addEventListener('click', function() {
                    this.parentElement.remove();
                });
            });
        </script>
        <?php
        ob_end_flush(); // Flush the output buffer
    }